<div class="container mt-4">
  <!-- Team Selector -->
  <div class="mb-4">
    <label for="teamSelect" class="form-label">Select Team</label>
    <select id="teamSelect" class="form-select" [(ngModel)]="selectedTeamId" (change)="onTeamSelect()">
      <option value="">-- Choose a Team --</option>
      <option *ngFor="let team of teams" [value]="team.id">{{ team.name }}</option>
    </select>
  </div>

  <!-- Schedule Generator -->
  <div class="card mb-4">
    <div class="card-header">
      <h5 class="mb-0">Generate Season Schedule</h5>
    </div>
    <div class="card-body">
      <form (ngSubmit)="generateSchedule()">
        <div class="row g-3">
          <div class="col-md-6">
            <label class="form-label">Season Start Date</label>
            <input type="date" class="form-control" [(ngModel)]="seasonStartDate" name="startDate" required />
          </div>
          <div class="col-md-6">
            <label class="form-label">Season End Date</label>
            <input type="date" class="form-control" [(ngModel)]="seasonEndDate" name="endDate" required />
          </div>
        </div>

        <div class="mt-3">
          <label class="form-label">Game Days</label>
          <div class="btn-group w-100">
            <button type="button" class="btn" 
                    *ngFor="let day of ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']; let i = index"
                    [class.btn-primary]="gameDays[i]"
                    [class.btn-outline-primary]="!gameDays[i]"
                    (click)="gameDays[i] = !gameDays[i]">
              {{ day }}
            </button>
          </div>
        </div>

        <div class="row g-3 mt-2">
          <div class="col-md-3">
            <label class="form-label">Total Games</label>
            <input type="number" class="form-control" [(ngModel)]="totalGames" name="totalGames" required />
          </div>
          <div class="col-md-3">
            <label class="form-label">Division Games</label>
            <input type="number" class="form-control" [(ngModel)]="divisionGames" name="divisionGames" required />
          </div>
          <div class="col-md-3">
            <label class="form-label">Conference Games</label>
            <input type="number" class="form-control" [(ngModel)]="conferenceGames" name="conferenceGames" required />
          </div>
          <div class="col-md-3">
            <label class="form-label">Other Conf. Games</label>
            <input type="number" class="form-control" [(ngModel)]="otherConferenceGames" name="otherConfGames" required />
          </div>
        </div>

        <div class="mt-3">
          <button type="submit" class="btn btn-primary">Generate Schedule</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Calendar View -->
  <div class="card" *ngIf="calendarDays.length > 0">
    <div class="card-header">
      <h5 class="mb-0">Season Calendar</h5>
    </div>
    <div class="card-body">
      <div class="row row-cols-7 text-center border-bottom py-2">
        <div class="col">Sun</div>
        <div class="col">Mon</div>
        <div class="col">Tue</div>
        <div class="col">Wed</div>
        <div class="col">Thu</div>
        <div class="col">Fri</div>
        <div class="col">Sat</div>
      </div>

      <div class="row row-cols-7">
        <ng-container *ngFor="let day of calendarDays">
          <div class="col border p-2" [class.bg-light]="!isGameDay(day.date)">
            <div class="d-flex justify-content-between align-items-center mb-1">
              <small class="text-muted">{{ getDayName(day.date) }}</small>
              <small class="text-muted">{{ day.date | date:'d' }}</small>
            </div>
            <div *ngFor="let game of day.games" class="small mb-1">
              <span [class.text-primary]="game.tags?.includes('division')"
                    [class.text-success]="game.tags?.includes('conference')"
                    [class.text-info]="game.tags?.includes('interconference')">
                {{ game.homeTeam }} vs {{ game.awayTeam }}
              </span>
            </div>
          </div>
        </ng-container>
      </div>
    </div>
  </div>
</div>